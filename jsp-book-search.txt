ASSIGNMENT NO. 5
JSP Experiments: Write a JSP application to input book information and store in the
database. Application must provide facility to search book based on title of book or
author or ISBN number.

BookApp.jsp
<%@ page import="java.sql.*" %>
<html>
<head>
<title>Book Management Application</title>
</head>
<body>
<h1> Book Management System</h1>
<!-- Menu -->
<a href="BookApp.jsp?action=add">Add Book</a> |
<a href="BookApp.jsp?action=search">Search Book</a>
<hr>
<%
String action = request.getParameter("action");
// Database connection variables
String url = "jdbc:mysql://localhost:3306/bookdb";
String user = "root"; // change if needed

String pass = "root"; // change if needed
Class.forName("com.mysql.cj.jdbc.Driver");
Connection conn = DriverManager.getConnection(url, user, pass);
if("add".equals(action)) {
%>
<!-- Add Book Form -->
<h2>Add a New Book</h2>
<form method="post" action="BookApp.jsp?action=add">
Title: <input type="text" name="title" required><br><br>
Author: <input type="text" name="author" required><br><br>
ISBN: <input type="text" name="isbn" required><br><br>
Publication Year: <input type="number" name="pub_year" required><br><br>
<input type="submit" value="Add Book">
</form>
<%
String title = request.getParameter("title");
String author = request.getParameter("author");
String isbn = request.getParameter("isbn");
String pub_year = request.getParameter("pub_year");
if(title != null && author != null && isbn != null && pub_year != null) {
try {
String sql = "INSERT INTO books (title, author, isbn, pub_year) VALUES (?, ?,
?, ?)";
PreparedStatement ps = conn.prepareStatement(sql);
ps.setString(1, title);
ps.setString(2, author);
ps.setString(3, isbn);
ps.setInt(4, Integer.parseInt(pub_year));
int i = ps.executeUpdate();
if(i > 0) {
out.println("<p style='color:green;'>
Book successfully added!</p>");
}
} catch(Exception e) {
out.println("<p style='color:red;'>Error: " + e.getMessage() + "</p>");
}
}
%>
<%
} else if("search".equals(action)) {
%>
<!-- Search Form -->
<h2>Search Book</h2>

<form method="get" action="BookApp.jsp">
<input type="hidden" name="action" value="search">
Enter keyword (Title / Author / ISBN):
<input type="text" name="keyword" required>
<input type="submit" value="Search">
</form>
<%
String keyword = request.getParameter("keyword");
if(keyword != null && !keyword.trim().equals("")) {
try {
String sql = "SELECT * FROM books WHERE title LIKE ? OR author LIKE ? OR
isbn LIKE ?";
PreparedStatement ps = conn.prepareStatement(sql);
String likeKeyword = "%" + keyword + "%";
ps.setString(1, likeKeyword);
ps.setString(2, likeKeyword);
ps.setString(3, likeKeyword);
ResultSet rs = ps.executeQuery();
if(rs.isBeforeFirst()) {
out.println("<h3>Search Results:</h3>");
out.println("<table border='1' cellpadding='5'>");
out.println("<tr><th>Title</th><th>Author</th><th>ISBN</th><th>Publication
Year</th></tr>");
while(rs.next()) {
out.println("<tr>");
out.println("<td>" + rs.getString("title") + "</td>");
out.println("<td>" + rs.getString("author") + "</td>");
out.println("<td>" + rs.getString("isbn") + "</td>");
out.println("<td>" + rs.getInt("pub_year") + "</td>");
out.println("</tr>");
}
out.println("</table>");
} else {
out.println("<p style='color:red;'>
No books found matching your
search.</p>");
}
} catch(Exception e) {
out.println("<p style='color:red;'>Error: " + e.getMessage() + "</p>");
}
}
%>
<%
} else {

out.println("<p>
}
conn.close();
%>
</body>
</html>

Choose an option above to proceed.</p>");

