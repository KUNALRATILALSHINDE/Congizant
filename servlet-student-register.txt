ASSIGNMENT NO. 3
3. Create servlet program for student registration and insert information into
MySQL
Student_Registration.html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Registration System</title>
<style>
*{
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

body {
background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
min-height: 100vh;
display: flex;
justify-content: center;
align-items: center;
padding: 20px;
}

.container {
width: 100%;
max-width: 500px;
background: white;
border-radius: 10px;

box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
overflow: hidden;
}

.header {
background: #4a6fc7;
color: white;
padding: 25px;
text-align: center;
}

.header h1 {
font-weight: 600;
font-size: 28px;
}

.form-container {
padding: 30px;
}

.form-group {
margin-bottom: 20px;
}

label {
display: block;
margin-bottom: 8px;
font-weight: 500;
color: #333;
}

input[type="text"], select {
width: 100%;

padding: 12px 15px;
border: 1px solid #ddd;
border-radius: 5px;
font-size: 16px;
transition: border-color 0.3s;
}

input[type="text"]:focus, select:focus {
border-color: #4a6fc7;
outline: none;
box-shadow: 0 0 0 3px rgba(74, 111, 199, 0.2);
}

.radio-group, .checkbox-group {
display: flex;
flex-wrap: wrap;
gap: 15px;
margin-top: 5px;
}

.radio-option, .checkbox-option {
display: flex;
align-items: center;
gap: 5px;
}

button {
width: 100%;
padding: 14px;
background: #4a6fc7;
color: white;
border: none;
border-radius: 5px;

font-size: 16px;
font-weight: 600;
cursor: pointer;
transition: background 0.3s;
margin-top: 10px;
}

button:hover {
background: #3b5aa6;
}

.message {
padding: 15px;
margin: 20px 0;
border-radius: 5px;
text-align: center;
font-weight: 500;
}

.error {
background-color: #f8d7da;
color: #721c24;
border: 1px solid #f5c6cb;
}

.success {
background-color: #d4edda;
color: #155724;
border: 1px solid #c3e6cb;
}
</style>
</head>
<body>

<div class="container">
<div class="header">
<h1>Student Registration System</h1>
</div>

<div class="form-container">
<!-- Message Area for displaying success/error messages -->
<div id="messageArea"></div>

<form id="registrationForm" action="register" method="post">
<div class="form-group">
<label for="roll_number">Roll Number:</label>
<input type="text" id="roll_number" name="roll_number" required>
</div>

<div class="form-group">
<label for="first_name">First Name:</label>
<input type="text" id="first_name" name="first_name" required>
</div>

<div class="form-group">
<label for="last_name">Last Name:</label>
<input type="text" id="last_name" name="last_name" required>
</div>

<div class="form-group">
<label for="academic_year">Academic Year:</label>
<select id="academic_year" name="academic_year" required>
<option value="">Select Academic Year</option>
<option value="First Year">First Year</option>
<option value="Second Year">Second Year</option>
<option value="Third Year">Third Year</option>
<option value="Fourth Year">Fourth Year</option>

</select>
</div>

<div class="form-group">
<label>Gender:</label>
<div class="radio-group">
<div class="radio-option">
<input type="radio" id="male" name="gender" value="Male" required>
<label for="male">Male</label>
</div>
<div class="radio-option">
<input type="radio" id="female" name="gender" value="Female">
<label for="female">Female</label>
</div>
<div class="radio-option">
<input type="radio" id="other" name="gender" value="Other">
<label for="other">Other</label>
</div>
</div>
</div>

<div class="form-group">
<label>Qualification:</label>
<div class="checkbox-group">
<div class="checkbox-option">
<input type="checkbox" id="hsc" name="qualification" value="HSC">
<label for="hsc">HSC</label>
</div>
<div class="checkbox-option">
<input type="checkbox" id="ssc" name="qualification" value="SSC">
<label for="ssc">SSC</label>
</div>
<div class="checkbox-option">

<input type="checkbox" id="diploma" name="qualification" value="Diploma">
<label for="diploma">Diploma</label>
</div>
<div class="checkbox-option">
<input type="checkbox" id="be" name="qualification" value="BE">
<label for="be">BE</label>
</div>
</div>
</div>

<button type="submit">Register Student</button>
</form>
</div>
</div>
<script>
// Function to show messages
function showMessage(message, type) {
const messageArea = document.getElementById('messageArea');
messageArea.innerHTML = `<div class="message ${type}">${message}</div>`;

// Scroll to message
messageArea.scrollIntoView({ behavior: 'smooth' });
}

// Check URL parameters for status messages
const urlParams = new URLSearchParams(window.location.search);
const status = urlParams.get('status');
const rollNumber = urlParams.get('rollNumber');

if (status === 'success') {
showMessage(`Student with Roll Number ${rollNumber} successfully registered!`, 'success');
} else if (status === 'error') {
if (rollNumber) {

showMessage(`Error: Student with Roll Number ${rollNumber} is already registered.`, 'error');
} else {
showMessage('Error registering student. Please try again.', 'error');
}
}

// Form validation
document.getElementById('registrationForm').addEventListener('submit', function(e) {
// Basic validation
const rollNumber = document.getElementById('roll_number').value;
const firstName = document.getElementById('first_name').value;
const lastName = document.getElementById('last_name').value;
const academicYear = document.getElementById('academic_year').value;
const gender = document.querySelector('input[name="gender"]:checked');
const qualifications = document.querySelectorAll('input[name="qualification"]:checked');

if (!rollNumber || !firstName || !lastName || !academicYear || !gender) {
e.preventDefault();
showMessage('Please fill all required fields', 'error');
return;
}

if (qualifications.length === 0) {
e.preventDefault();
showMessage('Please select at least one qualification', 'error');
return;
}
});
</script>
</body>
</html>

StudentRegistration.java

package wtexp3;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.annotation.WebServlet;
import java.sql.*;

@WebServlet("/register")
public class StudentRegistration extends HttpServlet {
private static final String JDBC_URL = "jdbc:mysql://localhost:3306/kit";
private static final String JDBC_USER = "root";
private static final String JDBC_PASSWORD = "root";

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

response.setContentType("text/html");
PrintWriter out = response.getWriter();

String rollNumber = request.getParameter("roll_number");
String firstName = request.getParameter("first_name");
String lastName = request.getParameter("last_name");
String academicYear = request.getParameter("academic_year");
String gender = request.getParameter("gender");
String[] qualifications = request.getParameterValues("qualification");

String qualification = "";
if (qualifications != null) {
qualification = String.join(", ", qualifications);
}

Connection conn = null;
PreparedStatement psCheck = null;
PreparedStatement psInsert = null;
ResultSet rs = null;

try {
// Load JDBC Driver
Class.forName("com.mysql.cj.jdbc.Driver");
// Establish connection
conn = DriverManager.getConnection(JDBC_URL, JDBC_USER, JDBC_PASSWORD);

// Check if student already exists
String checkQuery = "SELECT roll_number FROM students WHERE roll_number = ?";
psCheck = conn.prepareStatement(checkQuery);
psCheck.setString(1, rollNumber);
rs = psCheck.executeQuery();

if (rs.next()) {
// Student already exists - redirect with error
response.sendRedirect("student_registration.html?status=error&rollNumber=" + rollNumber);
} else {
// Insert student data
String insertQuery = "INSERT INTO students (roll_number, first_name, last_name, academic_year,
gender, qualification) VALUES (?, ?, ?, ?, ?, ?)";
psInsert = conn.prepareStatement(insertQuery);
psInsert.setString(1, rollNumber);
psInsert.setString(2, firstName);
psInsert.setString(3, lastName);
psInsert.setString(4, academicYear);
psInsert.setString(5, gender);
psInsert.setString(6, qualification);

int result = psInsert.executeUpdate();

if (result > 0) {
// Success - redirect with success message
response.sendRedirect("student_registration.html?status=success&rollNumber=" + rollNumber);
} else {
// Insert failed - redirect with error
response.sendRedirect("student_registration.html?status=error");
}
}
} catch (ClassNotFoundException e) {
e.printStackTrace();
response.sendRedirect("student_registration.html?status=error&message=Database driver not found");
} catch (SQLException e) {
e.printStackTrace();
response.sendRedirect("student_registration.html?status=error&message=Database error");
} catch (Exception e) {
e.printStackTrace();
response.sendRedirect("student_registration.html?status=error&message=Unexpected error");
} finally {
// Close resources
try { if (rs != null) rs.close(); } catch (SQLException e) { e.printStackTrace(); }
try { if (psCheck != null) psCheck.close(); } catch (SQLException e) { e.printStackTrace(); }
try { if (psInsert != null) psInsert.close(); } catch (SQLException e) { e.printStackTrace(); }
try { if (conn != null) conn.close(); } catch (SQLException e) { e.printStackTrace(); }
}
}

@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
// Redirect GET requests to the registration form
response.sendRedirect("student_registration.html");
}

}

