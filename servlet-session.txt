ASSIGNMENT NO. 7
7. Problem Statement: Simple Servlet Application for Session Management
LoginServlet.java
package EXP;
import java.io.*;
import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;

@WebServlet("/LoginServlet")
public class LoginServlet extends HttpServlet {
protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

String username = request.getParameter("username");
String password = request.getParameter("password");
// Hardcoded credentials
String validUsername = "admin";
String validPassword = "password123";

if (username != null && username.equals(validUsername) &&
password != null && password.equals(validPassword)) {

// Create session
HttpSession session = request.getSession();
session.setAttribute("username", username);

// Redirect to welcome page
response.sendRedirect("WelcomeServlet");

} else {
// Invalid credentials
request.setAttribute("error", "Invalid username or password.");
RequestDispatcher rd = request.getRequestDispatcher("login.jsp");
rd.forward(request, response);
}
}
}

WelcomeServlet.java
package EXP;

import java.io.*;
import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;

@WebServlet("/WelcomeServlet")
public class WelcomeServlet extends HttpServlet {
protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

response.setContentType("text/html;charset=UTF-8");
PrintWriter out = response.getWriter();

// Retrieve session (false means: don't create a new one if it doesn't exist)
HttpSession session = request.getSession(false);

if (session == null || session.getAttribute("username") == null) {
// Not logged in, redirect to login page
response.sendRedirect("login.jsp");

return;
}

String username = (String) session.getAttribute("username");

out.println("<!DOCTYPE html>");
out.println("<html>");
out.println("<head>");
out.println("<title>Welcome Page</title>");
out.println("<style>");
out.println("body { font-family: Arial, sans-serif; margin: 40px; }");
out.println(".container { max-width: 600px; margin: 0 auto; padding: 20px; border: 1px solid
#ccc; border-radius: 5px; }");
out.println(".logout { margin-top: 20px; }");
out.println("</style>");
out.println("</head>");
out.println("<body>");
out.println("<div class='container'>");
out.println("<h2>Welcome, " + username + "!</h2>");
out.println("<p>You have successfully logged in.</p>");
out.println("<div class='logout'>");
out.println("<a href='LogoutServlet'>Logout</a>");
out.println("</div>");
out.println("</div>");
out.println("</body>");
out.println("</html>");
}
}

LogoutServlet.java
package EXP;

import java.io.*;
import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;

@WebServlet("/LogoutServlet")
public class LogoutServlet extends HttpServlet {
protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

HttpSession session = request.getSession(false);

if (session != null) {
session.invalidate(); // Destroys the session
}

// Redirect to login page
response.sendRedirect("login.jsp");
}
}

Login.jsp
<!DOCTYPE html>
<html>
<head>
<title>Login Page</title>
<style>
body {
font-family: Arial, sans-serif;
margin: 40px;

background-color: #f4f4f4;
}
.login-container {
max-width: 400px;
margin: 0 auto;
padding: 20px;
background: white;
border-radius: 5px;
box-shadow: 0 0 10px rgba(0,0,0,0.1);
}
.form-group {
margin-bottom: 15px;
}
label {
display: block;
margin-bottom: 5px;
}
input[type="text"],
input[type="password"] {
width: 100%;
padding: 8px;
border: 1px solid #ddd;
border-radius: 4px;
box-sizing: border-box;
}
input[type="submit"] {
background-color: #4CAF50;
color: white;
padding: 10px 15px;
border: none;
border-radius: 4px;

cursor: pointer;
width: 100%;
}
input[type="submit"]:hover {
background-color: #45a049;
}
.error {
color: red;
margin-top: 10px;
text-align: center;
}
</style>
</head>
<body>
<div class="login-container">
<h2>Login Page</h2>
<form action="LoginServlet" method="post">
<div class="form-group">
<label for="username">Username:</label>
<input type="text" id="username" name="username" required>
</div>
<div class="form-group">
<label for="password">Password:</label>
<input type="password" id="password" name="password" required>
</div>
<div class="form-group">
<input type="submit" value="Login">
</div>
</form>

<!-- Display error message if present -->

<div class="error">
<%
String error = (String) request.getAttribute("error");
if (error != null) {
out.print(error);
}
%>
</div>
</div>
</body>
</html>

