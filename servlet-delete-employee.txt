ASSIGNMENT NO.4
Develop a Servlet application to delete information of employee from database .

deleteEmployee.html
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Delete Employee</title>
<style>
body {
font-family: Arial, sans-serif;
margin: 0;
padding: 20px;
background-color: #f5f5f5;
}
.container {
max-width: 500px;
margin: 0 auto;
background-color: white;
padding: 20px;
border-radius: 8px;
box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
}
h1 {
color: #333;
text-align: center;
margin-bottom: 20px;
}
.form-group {
margin-bottom: 15px;

}
label {
display: block;
margin-bottom: 5px;
font-weight: bold;
}
input[type="text"] {
width: 100%;
padding: 10px;
border: 1px solid #ddd;
border-radius: 4px;
box-sizing: border-box;
}
button {
background-color: #dc3545;
color: white;
padding: 10px 15px;
border: none;
border-radius: 4px;
cursor: pointer;
font-size: 16px;
width: 100%;
}
button:hover {
background-color: #c82333;
}
.message {
padding: 10px;
margin-top: 15px;
border-radius: 4px;
text-align: center;
display: none;
}

.error {
background-color: #f8d7da;
color: #721c24;
border: 1px solid #f5c6cb;
}
.success {
background-color: #d4edda;
color: #155724;
border: 1px solid #c3e6cb;
}
</style>
</head>
<body>
<div class="container">
<h1>Delete Employee Record</h1>

<div id="errorMessage" class="message error">
Error: Employee with ID <span id="errorId"></span> not found.
</div>

<div id="successMessage" class="message success">
Employee with ID <span id="successId"></span> has been successfully deleted.
</div>

<form id="deleteForm" action="deleteEmployee" method="POST">
<div class="form-group">
<label for="empId">Employee ID:</label>
<input type="text" id="empId" name="empId" required>
</div>
<button type="submit" onclick="return confirmDeletion()">Delete Employee</button>
</form>
</div>

<script>
function confirmDeletion() {
const empId = document.getElementById('empId').value;
if (!empId) {
alert('Please enter an Employee ID');
return false;
}

return confirm(`Are you sure you want to delete Employee with ID: ${empId}?`);
}

// Function to get URL parameters
function getUrlParams() {
const params = {};
const queryString = window.location.search;
const urlParams = new URLSearchParams(queryString);

params.success = urlParams.get('success');
params.error = urlParams.get('error');
params.empId = urlParams.get('empId');

return params;
}

// On page load, check for messages in URL
window.onload = function() {
const params = getUrlParams();

if (params.success === 'true') {
document.getElementById('successId').textContent = params.empId;
document.getElementById('successMessage').style.display = 'block';
}

if (params.error === 'true') {
document.getElementById('errorId').textContent = params.empId;
document.getElementById('errorMessage').style.display = 'block';
}
};
</script>
</body>
</html>

â€¢

DeleteEmployeeServlet.java

package employeeDeletion;

import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("/deleteEmployee")
public class DeleteEmployeeServlet extends HttpServlet {
private static final long serialVersionUID = 1L;

// Database connection parameters - update these with your database details
private static final String DB_URL = "jdbc:mysql://localhost:3306/kit";
private static final String DB_USER = "root";

private static final String DB_PASSWORD = "root";

protected void doPost(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {

String empId = request.getParameter("empId");

Connection conn = null;
PreparedStatement pstmt = null;
int rowsAffected = 0;

try {
// Load MySQL JDBC Driver
Class.forName("com.mysql.cj.jdbc.Driver");

// Establish database connection
conn = DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD);

// Prepare SQL DELETE statement
String sql = "DELETE FROM employees WHERE EmployeeID = ?";
pstmt = conn.prepareStatement(sql);
pstmt.setString(1, empId);

// Execute the delete operation
rowsAffected = pstmt.executeUpdate();

} catch (ClassNotFoundException e) {
e.printStackTrace();
// Handle error appropriately
response.sendRedirect("deleteEmployee.html?error=true&empId=" + empId);
return;
} catch (SQLException e) {
e.printStackTrace();

// Handle error appropriately
response.sendRedirect("deleteEmployee.html?error=true&empId=" + empId);
return;
} finally {
// Close resources
try {
if (pstmt != null) pstmt.close();
if (conn != null) conn.close();
} catch (SQLException e) {
e.printStackTrace();
}
}

// Check if deletion was successful
if (rowsAffected > 0) {
// Redirect with success message
response.sendRedirect("deleteEmployee.html?success=true&empId=" + empId);
} else {
// Redirect with error message
response.sendRedirect("deleteEmployee.html?error=true&empId=" + empId);
}
}

protected void doGet(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
// Redirect GET requests to the form
response.sendRedirect("deleteEmployee.html");
}
}

